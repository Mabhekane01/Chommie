// src/scripts/rollback.ts
import { rollbackLastMigration, cleanup } from '../client/init.js';

export async function rollback() {
  try {
    console.log('üîÑ Rolling back last migration...');

    const result = await rollbackLastMigration();

    if (result.success) {
      console.log(`‚úÖ Successfully rolled back: ${result.migrationName}`);
    } else {
      console.error(`‚ùå Rollback failed: ${result.error}`);
      process.exit(1);
    }
  } catch (error) {
    console.error('‚ùå Fatal error during rollback:', error);
    process.exit(1);
  } finally {
    await cleanup();
  }
}
